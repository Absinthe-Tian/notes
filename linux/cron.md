---
title: Cron表达式
date: 2023-10-15 20:32:45
category: Linux系统
tags:
  - cron
  - 表达式
  - 知识点
quiz: true
---

## cron表达式

cron表达式一般用来设置定时任务，而这种表达式来设置定时任务的风格也称为++cron风格的定时任务++{.dot}

cron表达式由==5或6个域==组成的字符串构成，每个域由==空格==隔开，皆代表一段时间。

> 语法格式：`Seconds Minutes Hours DayofMonth Month DayofWeek [Year]`
>
> Seconds：1-59，[`*` `/` `-` `,`]。
>
> Minutes：1-59，[`*` `/` `-` `,`]。
>
> Hours：0-23，[`*` `/` `-` `,`]。
>
> DayofMonth：1-31，[`*` `/` `-` `,` `?` `L` `W` `C`]。
>
> Month：1-12，[`*` `/` `-` `,`]。
>
> DayofWeek：1-7，[`*` `/` `-` `,` `?` `L` `#` `C`]，（注意：周日-周六，即1代表周日，7代表周六）。
>
> Year：1940-2099，[`*` `/` `-` `,`]。

每个域中，都可以使用数字+特殊符号的形式来代表时间。

> 基础符号如下：
>
> `*`：指任意时间。如，`0 30 * 1 1 ? 2023`，代表2023年1月1号，任意点的30分0秒。
>
> `/`：指间隔时间。如，`0 /15 12 1 1 ? 2023`，代表2023年1月1号，12点的每隔15分种的0秒。（也可以表示为：`0 */15 12 1 1 ? 2023`）
>
> `-`：指一段时间范围。如，`0 15-20 12 1 1 ? 2023`，代表2023年1月1号，12点15分0秒到20分0秒。
>
> `,`：指多个枚举时间。如，`0 0 12 ? * 2,4,6 2023`，代表2023年每月的周1、3、5，12点0分0秒。



> 特定符号如下：
>
> `?`：指占位未知时间，只能用于DayofMonth和DayofWeek，两者匹配其中一个，另一个必须使用`?`占位，目的是为了防止两者冲突。
>
> `L`：指最后一个时间，只能用于DayofMonth和DayofWeek。如，`0 0 12 L * ? 2023`，代表2023年每月的最后一天，12点0分0秒；`0 0 12 ? * 1L 2023`，代表2023年每月的最后一个周日，12点0分0秒。
>
> `#`：指顺序时间，只能用于DayofWeek。如，`0 0 12 ? * 1#2 2023`，代表2023年每月的第2个周日，12点0分0秒。
>
> `W`：指工作日，只能用于DayofMonth。如，`0 0 8 LW * ? 2023`，代表2023年每月最后一个工作日的8点0分0秒；`0 0 8 10W * ? 2023`，代表2023年每月10号最近的工作日。

## 综合练习

1. 每天的6点0分-23点59分，每隔15分钟[`0 */15 6-23 * * ?`]{.gap} 。{.quiz .fill}

2. 每月周六周日的8点和20点[`0 0 8,20 ? * 7,1`]{.gap} 。 {.quiz .fill}
3. 每月周一到周五的8点到18点59分，每隔2小时[`0 0 8-18/2 ? * 2-6`]{.gap}。 {.quiz .fill}
4. 每月的最后一个星期的周六和周日的12点到16点和18点的15、20、25分[`0 15,20,25 12-16,18 ? * 1L,7L`]{.gap}。 {.quiz .fill}

小贴士：可使用[cron表达式在线工具](https://www.bejson.com/othertools/cronvalidate/)校验及学习。